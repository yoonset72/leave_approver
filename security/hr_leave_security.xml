<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Record Rules for Leave Requests -->

    <!-- Rule for employees to see their own leaves -->
    <record id="hr_leave_rule_employee" model="ir.rule">
        <field name="name">Employee Leave Access</field>
        <field name="model_id" ref="hr_holidays.model_hr_leave"/>
        <field name="groups" eval="[(4, ref('base.group_user'))]"/>
        <field name="domain_force">['|', ('employee_id.user_id', '=', user.id), ('create_uid', '=', user.id)]</field>
    </record>

    <!-- Rule for first level approvers -->
    <record id="hr_leave_rule_first_approver" model="ir.rule">
        <field name="name">First Approver Leave Access</field>
        <field name="model_id" ref="hr_holidays.model_hr_leave"/>
        <field name="groups" eval="[(4, ref('base.group_user'))]"/>
        <field name="domain_force">[('first_approver_id', '=', user.id)]</field>
    </record>

    <!-- Rule for second level approvers (HR Officers) -->
    <record id="hr_leave_rule_second_approver" model="ir.rule">
        <field name="name">Second Approver Leave Access</field>
        <field name="model_id" ref="hr_holidays.model_hr_leave"/>
        <field name="groups" eval="[(4, ref('base.group_user'))]"/>
        <field name="domain_force">[('second_approver_ids', 'in', [user.id])]</field>
    </record>

    <!-- Rule for HR Managers to see all leaves -->
    <record id="hr_leave_rule_hr_manager" model="ir.rule">
        <field name="name">HR Manager Leave Access</field>
        <field name="model_id" ref="hr_holidays.model_hr_leave"/>
        <field name="groups" eval="[(4, ref('hr_holidays.group_hr_holidays_manager'))]"/>
        <field name="domain_force">[(1, '=', 1)]</field>
    </record>

</odoo>
